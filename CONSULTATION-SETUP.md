# üí¨ –§–æ—Ä–º–∞ "–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é" - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Vercel Postgres**
- ‚úÖ –ë–î —Å–æ–∑–¥–∞–Ω–∞: `test_gipoteza_zakryta`
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Vercel
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `consultations` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

### 2. **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**

#### API Routes:
- `app/api/init-db/route.ts` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã –ë–î
- `app/api/consultation/route.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫
- `app/api/consultations/route.ts` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫

#### –°—Ç—Ä–∞–Ω–∏—Ü—ã:
- `app/consultation/page.tsx` - —Ñ–æ—Ä–º–∞ "–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é"
- `app/admin/consultations/page.tsx` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫

#### –û–±–Ω–æ–≤–ª–µ–Ω—ã:
- `package.json` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `@vercel/postgres`
- `components/Header.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ "üí¨ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
- `components/Footer.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ "üí¨ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"

---

## üöÄ –î–ï–ü–õ–û–ô –ù–ê VERCEL

### –®–ê–ì 1: –û—Ç–ø—Ä–∞–≤—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ GitHub

```bash
git add .
git commit -m "Add consultation form with Vercel Postgres"
git push origin main
```

### –®–ê–ì 2: Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

- Vercel –æ–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç `@vercel/postgres`
- –î–µ–ø–ª–æ–π –∑–∞–π–º—ë—Ç 2-3 –º–∏–Ω—É—Ç—ã

### –®–ê–ì 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π –ë–î (–û–î–ò–ù –†–ê–ó!)

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
https://—Ç–≤–æ–π-—Å–∞–π—Ç.vercel.app/api/init-db
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```json
{
  "success": true,
  "message": "–¢–∞–±–ª–∏—Ü–∞ consultations —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
}
```

---

## üìã –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢

### –§–æ—Ä–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏:
- **URL:** `/consultation`
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
  - –ò–º—è –∏ –§–∞–º–∏–ª–∏—è
  - –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏ (—Ç–µ–ª–µ—Ñ–æ–Ω/email/Telegram)
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
  - –°–æ–æ–±—â–µ–Ω–∏–µ

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
- **URL:** `/admin/consultations`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞—è–≤–∫–∏ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–µ
- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω, email, Telegram)

---

## üß™ –õ–û–ö–ê–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –¥–æ –¥–µ–ø–ª–æ—è:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

### 2. –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –°–∫–æ–ø–∏—Ä—É–π —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ Vercel Dashboard ‚Üí Storage ‚Üí test_gipoteza_zakryta
POSTGRES_URL="—Ç–≤–æ–π_url"
POSTGRES_PRISMA_URL="—Ç–≤–æ–π_url"
POSTGRES_URL_NO_SSL="—Ç–≤–æ–π_url"
POSTGRES_URL_NON_POOLING="—Ç–≤–æ–π_url"
POSTGRES_USER="—Ç–≤–æ–π_user"
POSTGRES_HOST="—Ç–≤–æ–π_host"
POSTGRES_PASSWORD="—Ç–≤–æ–π_password"
POSTGRES_DATABASE="—Ç–≤–æ–π_database"
```

### 3. –ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
npm run dev
```

### 4. –û—Ç–∫—Ä–æ–π:
- http://localhost:3000/api/init-db (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î)
- http://localhost:3000/consultation (—Ñ–æ—Ä–º–∞)
- http://localhost:3000/admin/consultations (–∞–¥–º–∏–Ω–∫–∞)

---

## üéØ –°–¢–†–£–ö–¢–£–†–ê –ë–î

### –¢–∞–±–ª–∏—Ü–∞: `consultations`

| –ü–æ–ª–µ       | –¢–∏–ø          | –û–ø–∏—Å–∞–Ω–∏–µ                  |
|------------|--------------|---------------------------|
| id         | SERIAL       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| name       | VARCHAR(255) | –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| phone      | VARCHAR(50)  | –¢–µ–ª–µ—Ñ–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)     |
| email      | VARCHAR(255) | Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)       |
| telegram   | VARCHAR(255) | Telegram –Ω–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)|
| message    | TEXT         | –°–æ–æ–±—â–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)   |
| created_at | TIMESTAMP    | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è             |

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –•–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑ –ø–æ–ª–µ–π (phone, email, telegram) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ (—á–µ—Ä–µ–∑ `@vercel/postgres`)
- ‚ö†Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å **–ù–ï –∑–∞—â–∏—â–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–º**

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. **–î–æ–±–∞–≤—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –¥–ª—è `/admin/consultations`
2. **Rate limiting** –¥–ª—è `/api/consultation` (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
3. **Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ
4. **CAPTCHA** –Ω–∞ —Ñ–æ—Ä–º—É (–æ—Ç –±–æ—Ç–æ–≤)

---

## üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä—å:
1. ‚úÖ –§–æ—Ä–º–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: `/consultation`
2. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É —Å –û–î–ù–ò–ú —Å–ø–æ—Å–æ–±–æ–º —Å–≤—è–∑–∏ ‚Üí –æ—Ç–ø—Ä–∞–≤—å
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. ‚úÖ –û—Ç–∫—Ä–æ–π –∞–¥–º–∏–Ω–∫—É: `/admin/consultations`
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∑–∞—è–≤–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã:
- ‚úÖ –¢–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω
- ‚úÖ –¢–æ–ª—å–∫–æ email
- ‚úÖ –¢–æ–ª—å–∫–æ Telegram
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- ‚ùå –ü—É—Å—Ç–æ–µ –∏–º—è (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)
- ‚ùå –ù–µ—Ç —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)

---

## üêõ –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –û—à–∏–±–∫–∞: "relation "consultations" does not exist"
**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–∫—Ä–æ–π `/api/init-db` - —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞

### –û—à–∏–±–∫–∞: "Missing environment variables"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É –≤ Vercel Dashboard

### –ó–∞—è–≤–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ API

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### Vercel Dashboard:
- **Logs:** –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ä–∞–∑–¥–µ–ª–µ "Logs"
- **Usage:** –ü—Ä–æ–≤–µ—Ä—è–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ë–î –≤ "Storage"

### –õ–∏–º–∏—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ Neon:
- 0.5 GB —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- 100 –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- 120 —á–∞—Å–æ–≤ compute/–º–µ—Å—è—Ü

---

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å:
- ‚úÖ –§–æ—Ä–º–∞ –¥–ª—è —Å–±–æ—Ä–∞ –∑–∞—è–≤–æ–∫
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω –≤ —Ç–≤–æ–µ–π —á–µ—Ä–Ω–æ–π —Ç–µ–º–µ

**–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!** üöÄ
